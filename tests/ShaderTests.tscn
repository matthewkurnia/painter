[gd_scene load_steps=20 format=2]

[ext_resource path="res://assets/2d/zaanse-schans-windmills-871287755496PrsW.png" type="Texture" id=1]
[ext_resource path="res://assets/2d/halloween-still-life-19441290201214vfM.png" type="Texture" id=2]
[ext_resource path="res://materials/value_grouping_material.tres" type="Material" id=3]
[ext_resource path="res://assets/strokes/dry_1.png" type="Texture" id=4]
[ext_resource path="res://icon.png" type="Texture" id=5]
[ext_resource path="res://materials/canvaser_material.tres" type="Material" id=6]
[ext_resource path="res://materials/kuwahara_material.tres" type="Material" id=7]
[ext_resource path="res://shaders/strokes_nueue.gdshader" type="Shader" id=8]
[ext_resource path="res://assets/2d/IMG_0665.PNG" type="Texture" id=9]
[ext_resource path="res://painter/Strokes.gd" type="Script" id=10]

[sub_resource type="Shader" id=7]
code = "shader_type canvas_item;

uniform float horizontal_resolution: hint_range(1.0, 1000.0, 0.1);
uniform float amount: hint_range(0.0, 40.0, 0.1) = 40.0;

const vec2 B0 = vec2(0.0, 0.0);
const vec2 B1 = vec2(0.5, 0.0);
const vec2 B2 = vec2(0.5, 1.0);
const vec2 B3 = vec2(1.0, 1.0);

vec2 bezier_interpolate(vec2 q0, vec2 q1, vec2 q2, vec2 q3, float t) {
	q0 = mix(q0, q1, t);
	q1 = mix(q1, q2, t);
	q2 = mix(q2, q3, t);
	q0 = mix(q0, q1, t);
	q1 = mix(q1, q2, t);
	q0 = mix(q0, q1, t);
	return q0;
}

void fragment() {
	vec2 ratio = vec2(1.0, TEXTURE_PIXEL_SIZE.x / TEXTURE_PIXEL_SIZE.y);
	vec2 pixelated_uv = round(UV * horizontal_resolution * ratio) / (horizontal_resolution * ratio);
//	vec2 pixelated_uv = round(UV * amount) / amount;
	COLOR = texture(TEXTURE, pixelated_uv);
//	COLOR =
//		mix(
//			texture(TEXTURE, pixelated_uv),
//			texture(TEXTURE, pixelated_uv + vec2(sign(UV.x - pixelated_uv.x) / horizontal_resolution, 0)),
//			bezier_interpolate(B0, B1, B2, B3, abs(UV.x - pixelated_uv.x) * horizontal_resolution).y
//		);
//	)
//	COLOR = vec4(UV.x * bezier_interpolate(B0, B1, B2, B3, UV.x).x, 0.0, 0.0, 1.0);
//	COLOR = vec4(UV.x, 0.0, 0.0, 1.0);
}"

[sub_resource type="ShaderMaterial" id=10]
shader = SubResource( 7 )
shader_param/horizontal_resolution = 23.9
shader_param/amount = 40.0

[sub_resource type="Gradient" id=1]
interpolation_mode = 2
offsets = PoolRealArray( 0, 0.109677, 0.903226, 1 )
colors = PoolColorArray( 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0 )

[sub_resource type="GradientTexture" id=2]
gradient = SubResource( 1 )

[sub_resource type="Image" id=14]
data = {
"data": PoolByteArray( 209, 215, 28, 60, 152, 93, 109, 60, 0, 0, 128, 63, 0, 0, 128, 63, 222, 74, 203, 61, 36, 16, 132, 62, 0, 0, 128, 63, 0, 0, 128, 63, 123, 163, 3, 62, 125, 214, 165, 61, 0, 0, 128, 63, 0, 0, 128, 63, 22, 32, 212, 59, 239, 11, 69, 62, 0, 0, 128, 63, 0, 0, 128, 63, 116, 205, 203, 60, 139, 116, 223, 62, 0, 0, 128, 63, 0, 0, 128, 63, 56, 177, 80, 62, 84, 24, 16, 63, 0, 0, 128, 63, 0, 0, 128, 63, 251, 206, 70, 62, 155, 106, 221, 62, 0, 0, 128, 63, 0, 0, 128, 63, 39, 16, 183, 61, 132, 236, 32, 63, 0, 0, 128, 63, 0, 0, 128, 63, 211, 93, 71, 60, 160, 186, 66, 63, 0, 0, 128, 63, 0, 0, 128, 63, 189, 245, 3, 62, 215, 237, 113, 63, 0, 0, 128, 63, 0, 0, 128, 63, 128, 23, 59, 62, 31, 171, 66, 63, 0, 0, 128, 63, 0, 0, 128, 63, 242, 137, 155, 62, 54, 218, 89, 63, 0, 0, 128, 63, 0, 0, 128, 63, 180, 68, 188, 62, 45, 212, 42, 63, 0, 0, 128, 63, 0, 0, 128, 63, 70, 164, 127, 60, 112, 92, 110, 63, 0, 0, 128, 63, 0, 0, 128, 63, 53, 214, 86, 62, 173, 1, 117, 63, 0, 0, 128, 63, 0, 0, 128, 63, 240, 148, 159, 62, 175, 127, 5, 63, 0, 0, 128, 63, 0, 0, 128, 63, 100, 232, 136, 62, 148, 172, 168, 62, 0, 0, 128, 63, 0, 0, 128, 63, 88, 95, 248, 62, 148, 143, 31, 63, 0, 0, 128, 63, 0, 0, 128, 63, 82, 13, 214, 62, 216, 130, 122, 62, 0, 0, 128, 63, 0, 0, 128, 63, 27, 2, 249, 62, 73, 201, 220, 62, 0, 0, 128, 63, 0, 0, 128, 63, 227, 210, 38, 63, 225, 160, 190, 62, 0, 0, 128, 63, 0, 0, 128, 63, 44, 163, 21, 63, 211, 253, 47, 62, 0, 0, 128, 63, 0, 0, 128, 63, 216, 10, 34, 63, 185, 215, 33, 63, 0, 0, 128, 63, 0, 0, 128, 63, 100, 128, 58, 63, 191, 204, 18, 63, 0, 0, 128, 63, 0, 0, 128, 63, 27, 91, 69, 63, 233, 104, 91, 63, 0, 0, 128, 63, 0, 0, 128, 63, 206, 117, 29, 63, 116, 133, 87, 63, 0, 0, 128, 63, 0, 0, 128, 63, 174, 50, 250, 62, 162, 92, 87, 63, 0, 0, 128, 63, 0, 0, 128, 63, 122, 131, 199, 62, 70, 68, 117, 63, 0, 0, 128, 63, 0, 0, 128, 63, 87, 188, 82, 63, 31, 187, 50, 63, 0, 0, 128, 63, 0, 0, 128, 63, 252, 123, 104, 63, 229, 237, 77, 63, 0, 0, 128, 63, 0, 0, 128, 63, 109, 50, 116, 63, 162, 82, 19, 63, 0, 0, 128, 63, 0, 0, 128, 63, 105, 220, 91, 63, 237, 5, 118, 63, 0, 0, 128, 63, 0, 0, 128, 63, 157, 220, 89, 63, 84, 62, 9, 63, 0, 0, 128, 63, 0, 0, 128, 63, 184, 92, 64, 63, 153, 72, 214, 62, 0, 0, 128, 63, 0, 0, 128, 63, 130, 242, 60, 63, 242, 243, 53, 62, 0, 0, 128, 63, 0, 0, 128, 63, 44, 77, 89, 63, 6, 78, 79, 62, 0, 0, 128, 63, 0, 0, 128, 63, 36, 171, 92, 63, 229, 151, 178, 62, 0, 0, 128, 63, 0, 0, 128, 63, 254, 44, 114, 63, 163, 21, 216, 62, 0, 0, 128, 63, 0, 0, 128, 63, 13, 13, 124, 63, 228, 180, 24, 62, 0, 0, 128, 63, 0, 0, 128, 63, 114, 251, 81, 63, 30, 19, 227, 60, 0, 0, 128, 63, 0, 0, 128, 63, 220, 121, 26, 63, 215, 84, 103, 59, 0, 0, 128, 63, 0, 0, 128, 63, 189, 126, 117, 63, 174, 58, 127, 63, 0, 0, 128, 63, 0, 0, 128, 63, 238, 31, 245, 62, 248, 12, 186, 61, 0, 0, 128, 63, 0, 0, 128, 63, 189, 96, 166, 62, 3, 139, 93, 60, 0, 0, 128, 63, 0, 0, 128, 63, 81, 228, 85, 62, 70, 89, 77, 61, 0, 0, 128, 63, 0, 0, 128, 63, 163, 43, 76, 62, 114, 98, 112, 62, 0, 0, 128, 63, 0, 0, 128, 63, 246, 226, 166, 62, 156, 45, 71, 62, 0, 0, 128, 63, 0, 0, 128, 63 ),
"format": "RGBAFloat",
"height": 1,
"mipmaps": false,
"width": 47
}

[sub_resource type="ImageTexture" id=15]
image = SubResource( 14 )
size = Vector2( 47, 1 )

[sub_resource type="ShaderMaterial" id=13]
shader = ExtResource( 8 )
shader_param/debug = false
shader_param/amount = null
shader_param/scale = 0.2
shader_param/scale_random_amount = null
shader_param/respawn_threshold = 0.3
shader_param/emission_box_extents = Vector3( 512, 300, 1 )
shader_param/color_ramp = SubResource( 2 )
shader_param/raw_position_data = SubResource( 15 )

[sub_resource type="Shader" id=11]
code = "shader_type canvas_item;

uniform int kernel_size_0: hint_range(0, 6, 1);
uniform int kernel_size_1: hint_range(0, 6, 1);
uniform int kernel_size_2: hint_range(0, 6, 1);
uniform int kernel_size_3: hint_range(0, 6, 1);
uniform int kernel_size_4: hint_range(0, 6, 1);

void fragment() {
	
}"

[sub_resource type="ShaderMaterial" id=12]
shader = SubResource( 11 )
shader_param/kernel_size_0 = null
shader_param/kernel_size_1 = null
shader_param/kernel_size_2 = null
shader_param/kernel_size_3 = null
shader_param/kernel_size_4 = null

[node name="ShaderTests" type="Node2D"]

[node name="Sprite1" type="Sprite" parent="."]
material = ExtResource( 3 )
position = Vector2( -1306, -59 )
scale = Vector2( 0.358163, 0.358163 )
texture = ExtResource( 2 )
offset = Vector2( 5282.51, 2722.22 )

[node name="Sprite3" type="Sprite" parent="."]
material = ExtResource( 7 )
position = Vector2( -2921, 32 )
texture = ExtResource( 2 )
offset = Vector2( 1141, 676 )

[node name="Sprite4" type="Sprite" parent="."]
material = SubResource( 10 )
position = Vector2( 42, 4.00003 )
scale = Vector2( 0.420833, 0.420833 )
texture = ExtResource( 2 )
offset = Vector2( 1141, 676 )

[node name="Sprite2" type="Sprite" parent="."]
material = ExtResource( 3 )
position = Vector2( 789, 1923 )
scale = Vector2( 0.815944, 0.815944 )
texture = ExtResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
texture = ExtResource( 5 )

[node name="Zaanse-schans-windmills-871287755496PrsW" type="Sprite" parent="."]
visible = false
position = Vector2( -800, 702 )
texture = ExtResource( 2 )

[node name="Particles2D" type="Particles2D" parent="."]
material = ExtResource( 6 )
position = Vector2( -800, 703 )
amount = 47
preprocess = 60.0
process_material = SubResource( 13 )
texture = ExtResource( 4 )
script = ExtResource( 10 )

[node name="Img0665" type="Sprite" parent="."]
material = SubResource( 12 )
position = Vector2( 2660, 218 )
texture = ExtResource( 9 )
