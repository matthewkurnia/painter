[gd_scene load_steps=14 format=2]

[ext_resource path="res://assets/2d/zaanse-schans-windmills-871287755496PrsW.png" type="Texture" id=1]
[ext_resource path="res://assets/2d/halloween-still-life-19441290201214vfM.png" type="Texture" id=2]
[ext_resource path="res://materials/value_grouping_material.tres" type="Material" id=3]
[ext_resource path="res://assets/2d/image-from-rawpixel-id-6968861-original.png" type="Texture" id=4]
[ext_resource path="res://icon.png" type="Texture" id=5]
[ext_resource path="res://materials/canvaser_material.tres" type="Material" id=6]
[ext_resource path="res://materials/kuwahara_material.tres" type="Material" id=7]
[ext_resource path="res://materials/basic_brush_particle_material.tres" type="Material" id=8]
[ext_resource path="res://assets/2d/IMG_0665.PNG" type="Texture" id=9]

[sub_resource type="Shader" id=7]
code = "shader_type canvas_item;

uniform float horizontal_resolution: hint_range(1.0, 1000.0, 0.1);
uniform float amount: hint_range(0.0, 40.0, 0.1) = 40.0;

const vec2 B0 = vec2(0.0, 0.0);
const vec2 B1 = vec2(0.5, 0.0);
const vec2 B2 = vec2(0.5, 1.0);
const vec2 B3 = vec2(1.0, 1.0);

vec2 bezier_interpolate(vec2 q0, vec2 q1, vec2 q2, vec2 q3, float t) {
	q0 = mix(q0, q1, t);
	q1 = mix(q1, q2, t);
	q2 = mix(q2, q3, t);
	q0 = mix(q0, q1, t);
	q1 = mix(q1, q2, t);
	q0 = mix(q0, q1, t);
	return q0;
}

void fragment() {
	vec2 ratio = vec2(1.0, TEXTURE_PIXEL_SIZE.x / TEXTURE_PIXEL_SIZE.y);
	vec2 pixelated_uv = round(UV * horizontal_resolution * ratio) / (horizontal_resolution * ratio);
//	vec2 pixelated_uv = round(UV * amount) / amount;
	COLOR = texture(TEXTURE, pixelated_uv);
//	COLOR =
//		mix(
//			texture(TEXTURE, pixelated_uv),
//			texture(TEXTURE, pixelated_uv + vec2(sign(UV.x - pixelated_uv.x) / horizontal_resolution, 0)),
//			bezier_interpolate(B0, B1, B2, B3, abs(UV.x - pixelated_uv.x) * horizontal_resolution).y
//		);
//	)
//	COLOR = vec4(UV.x * bezier_interpolate(B0, B1, B2, B3, UV.x).x, 0.0, 0.0, 1.0);
//	COLOR = vec4(UV.x, 0.0, 0.0, 1.0);
}"

[sub_resource type="ShaderMaterial" id=10]
shader = SubResource( 7 )
shader_param/horizontal_resolution = 23.9
shader_param/amount = 40.0

[sub_resource type="Shader" id=11]
code = "shader_type canvas_item;

uniform int kernel_size_0: hint_range(0, 6, 1);
uniform int kernel_size_1: hint_range(0, 6, 1);
uniform int kernel_size_2: hint_range(0, 6, 1);
uniform int kernel_size_3: hint_range(0, 6, 1);
uniform int kernel_size_4: hint_range(0, 6, 1);

void fragment() {
	
}"

[sub_resource type="ShaderMaterial" id=12]
shader = SubResource( 11 )
shader_param/kernel_size_0 = null
shader_param/kernel_size_1 = null
shader_param/kernel_size_2 = null
shader_param/kernel_size_3 = null
shader_param/kernel_size_4 = null

[node name="ShaderTests" type="Node2D"]

[node name="Sprite1" type="Sprite" parent="."]
material = ExtResource( 3 )
position = Vector2( -1306, -59 )
scale = Vector2( 0.358163, 0.358163 )
texture = ExtResource( 2 )
offset = Vector2( 5282.51, 2722.22 )

[node name="Sprite3" type="Sprite" parent="."]
material = ExtResource( 7 )
position = Vector2( -2921, 32 )
texture = ExtResource( 2 )
offset = Vector2( 1141, 676 )

[node name="Sprite4" type="Sprite" parent="."]
material = SubResource( 10 )
position = Vector2( 42, 4.00003 )
scale = Vector2( 0.420833, 0.420833 )
texture = ExtResource( 2 )
offset = Vector2( 1141, 676 )

[node name="Sprite2" type="Sprite" parent="."]
material = ExtResource( 3 )
position = Vector2( 789, 1923 )
scale = Vector2( 0.815944, 0.815944 )
texture = ExtResource( 1 )

[node name="Sprite" type="Sprite" parent="."]
texture = ExtResource( 5 )

[node name="Zaanse-schans-windmills-871287755496PrsW" type="Sprite" parent="."]
position = Vector2( -800, 702 )
texture = ExtResource( 2 )

[node name="Particles2D" type="Particles2D" parent="."]
material = ExtResource( 6 )
position = Vector2( -800, 702 )
amount = 20000
lifetime = 17.36
draw_order = 1
process_material = ExtResource( 8 )
texture = ExtResource( 4 )

[node name="Img0665" type="Sprite" parent="."]
material = SubResource( 12 )
position = Vector2( 2660, 218 )
texture = ExtResource( 9 )
